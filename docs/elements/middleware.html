<article-header>Middleware</article-header>

<article-paragraphs>
    <p>
        Use <br>
        <code class="text-sky-600">Blumilk\BLT\Features\Middleware</code> context <br>
        or add <br>
        <code class="text-sky-600">Blumilk\BLT\Features\Traits\Middleware</code> trait to test your application's
        middleware features.
    </p>
</article-paragraphs>

<section-header>Middleware Methods</section-header>
<article-paragraphs>
    <p>
        The <code>Middleware</code> trait provides several methods to handle middleware within your Laravel application.
        These methods help ensure that your application's middleware is functioning as expected and can be enabled or
        disabled for specific test scenarios.
    </p>
</article-paragraphs>

<article-paragraphs>
    <p>
        This snippet disables a specified middleware. It allows you to test scenarios where certain middleware should be
        bypassed.
        <br>
        You can specify the middleware class to disable it.
    </p>
</article-paragraphs>
<code-snippet
        gherkin="Given there is 'App\Http\Middleware\Authenticate' middleware disabled"
        php="
    /**
     * @Given there is :middleware middleware disabled
     */
    public function disableMiddleware(string $middleware): void"></code-snippet>

<article-paragraphs>
    <p>
        The <code>disableMiddlewares</code> method disables multiple middlewares specified in a table. This is useful
        for scenarios where you need to disable several middlewares at once.
    </p>
</article-paragraphs>

<code-snippet
        gherkin="Given there are middlewares disabled:
        | middleware                                |
        | App\Http\Middleware\Authenticate          |
        | App\Http\Middleware\VerifyCsrfToken       |
        | App\Http\Middleware\ThrottleRequests      |"
        php="
    /**
     * @Given there are middlewares disabled:
     */
    public function disableMiddlewares(TableNode $table): void"></code-snippet>

<article-paragraphs>
    <p>
        The <code>disableThrottling</code> method disables the throttling middleware. This is useful for testing
        scenarios where rate limiting should be bypassed.
    </p>
</article-paragraphs>

<code-snippet
        gherkin="Given there's throttling middleware disabled"
        php="
    /**
     * @Given there's throttling middleware disabled
     */
    public function disableThrottling(): void"></code-snippet>

<article-paragraphs>
    <p>
        The <code>disableCsrfProtection</code> method disables the CSRF protection middleware. This is useful for
        testing scenarios where CSRF protection should be bypassed.
    </p>
</article-paragraphs>

<code-snippet
        gherkin="Given there's CSRF protection middleware disabled"
        php="
    /**
     * @Given there's CSRF protection middleware disabled
     */
    public function disableCsrfProtection(): void"></code-snippet>

<article-paragraphs>
    <p>
        The <code>enableMiddleware</code> method enables a specified middleware. This is useful for scenarios where you
        need to ensure that a particular middleware is active.
    </p>
</article-paragraphs>

<code-snippet
        gherkin="Given there is a 'App\Http\Middleware\Authenticate' middleware enabled"
        php="
    /**
     * @Given there is a :middleware middleware enabled
     */
    public function enableMiddleware(string $middleware): void"></code-snippet>

<article-paragraphs>
    <p>
        The <code>requestShouldHaveUuidInField</code> method verifies that a specified field in the request contains a
        valid UUID. This is useful for ensuring that UUIDs are correctly generated and included in the request.
    </p>
</article-paragraphs>

<code-snippet
        gherkin="Then request object should have an UUID in 'transaction_id' field"
        php="
    /**
     * @Then request object should have an UUID in :field field
     */
    public function requestShouldHaveUuidInField(string $field): void"></code-snippet>

<article-paragraphs>
    <p>
        The <code>middlewareShouldBeAppliedToRequest</code> method verifies that a specified middleware has been applied
        to the request. This is useful for ensuring that the middleware is correctly modifying the request as expected.
    </p>
</article-paragraphs>

<code-snippet
        gherkin="Then the middleware 'App\Http\Middleware\Authenticate' should be applied to the request"
        php="
    /**
     * @Then the middleware :middleware should be applied to the request
     */
    public function middlewareShouldBeAppliedToRequest(string $middleware): void"></code-snippet>
