<article-header>Notification</article-header>

<article-paragraphs>
    <p>
        Use <br>
        <code class="text-sky-600">Blumilk\BLT\Features\Notification</code> context <br>
        or add <br>
        <code class="text-sky-600">Blumilk\BLT\Features\Traits\Notification</code> trait to test your application's
        notification features.
    </p>
</article-paragraphs>

<section-header>Notification Methods</section-header>
<article-paragraphs>
    <p>
        The <code>Notification</code> trait provides several methods to handle notifications within your Laravel application. These methods help ensure that your application's notification system is functioning as expected and can be tested effectively.
    </p>
</article-paragraphs>

<article-paragraphs>
    <p>
        This snippet fakes notifications, allowing you to test scenarios where notifications are sent without actually sending them. It is useful for capturing and asserting notifications during tests.
    </p>
</article-paragraphs>
<code-snippet gherkin="Given notifications are being faked" php="
    /**
     * @Given notifications are being faked
     * @throws BindingResolutionException
     */
    public function fakeNotifications(): void
"></code-snippet>

<article-paragraphs>
    <p>
        The <code>sendNotification</code> method sends a specified notification to an object identified by a value in a specified field. This is useful for testing scenarios where notifications need to be sent to specific users or objects.
    </p>
</article-paragraphs>

<code-snippet gherkin="Given NewInvoiceNotification notification is sent to user with 'admin@example.com' value in email field" php="
    /**
     * @Given :notification notification is sent
     * @Given :notification notification is sent to :object with :value value in :field field
     */
    public function sendNotification(string $notification, string $object = 'User', string $value = '', string $field = ''): void
"></code-snippet>

<article-paragraphs>
    <p>
        The <code>assertNotificationSent</code> method verifies that a specified notification was sent a certain number of times. This is useful for ensuring that notifications are sent the expected number of times.
    </p>
</article-paragraphs>

<code-snippet gherkin="Then NewInvoiceNotification notification was sent 1 times" php="
    /**
     * @Then :notification notification was sent
     * @Then :notification notification was sent :count times
     */
    public function assertNotificationSent(string $notification, int $count = 1): void
"></code-snippet>

<article-paragraphs>
    <p>
        The <code>assertNotificationSentToUser</code> method verifies that a specified notification was sent to an object identified by a value in a specified field. This is useful for ensuring that notifications are sent to the correct users or objects.
    </p>
</article-paragraphs>

<code-snippet gherkin="Then  NewInvoiceNotification notification was sent to user with 'admin@example.com' value in email field" php="
    /**
     * @Then :notification notification was sent to :object with :value value in :field field
     */
    public function assertNotificationSentToUser(string $notification, string $object, string $value, string $field): void
"></code-snippet>

<article-paragraphs>
    <p>
        The <code>assertNotificationNotSent</code> method verifies that a specified notification was not sent to an object identified by a value in a specified field. This is useful for ensuring that notifications are not sent when they shouldn't be.
    </p>
</article-paragraphs>

<code-snippet gherkin="Then  NewInvoiceNotification was not sent to user with 'admin@example.com' value in email field" php="
    /**
     * @Then :notification was not sent to :object with :value value in :field field
     */
    public function assertNotificationNotSent(string $notification, string $object, string $value, string $field): void
"></code-snippet>

<article-paragraphs>
    <p>
        The <code>assertNothingWasSent</code> method verifies that no notifications were sent. This is useful for ensuring that no notifications are sent when they shouldn't be.
    </p>
</article-paragraphs>

<code-snippet gherkin="Then not one notification was sent" php="
    /**
     * @Then not one notification was sent
     */
    public function assertNothingWasSent(): void
"></code-snippet>
